# 정규화

정규화는 데이터베이스 설계에서 데이터 중복을 줄이고 데이터 무결성을 높이기 위한 과정이다. 정규화는 여러 단계로 이루어지고 각각의 단계에서 데이터의 관계와 제약 조건을 개선시킨다. 정규화는 1정규화부터 5정규화까지 있다.

## 1정규화 (1NF: First Normal From)

1정규화는 각 열이 원자값(Atomic Value)을 가지도록 하는 것이다. 이를 통해 열에는 더 이상 여러 개의 값이나 반복 그룹이 허용되지 않는다

- 목표 : 각 열이 하나의 값만 가지도록 하여 테이블 구조 단순화
- 예시 : 학생이 여러개의 연락처를 가진 경우, 각각의 연락처를 개별 행으로 분리

## 2정규화 (2NF: Second Normal Form)

2정규화는 1정규화를 만족하면서 **부분 함수 종속을 제거하는 것이다.** 기본 키의 부분집합에 종속되는 속성들을 제거하여 별도의 테이블로 분리한다

- 목표 : 테이블을 여러 개로 나누어 데이터의 중복을 줄인다
- 조건 : 모든 비 Primary key 속성이 기본 키에 대해 완전 함수 종속이 되도록 한다
- 예시 : 학생의 학과 정보와 학과 주소 정보를 분리해 학생 테이블과 학과 테이블로 나누어 연결

> 함수 종속이란?
> 어떠한 관계 R에서 X와 Y를 각각 R의 애트리뷰트 집합의 부분 집합이라고 할때 X의 값에 대해 Y의 값이 오직 하나만 연관되어 있을 경우 Y는 X에 종속
> 표현 : X → Y

> 부분 함수적 종속
> 릴레이션에서 종속자가 기본키가 아닌 다른 속성에 종속되거나 기본키가 여러 속성으로 구성되어 있을 경우 기본 키를 구성하는 속성 중 일부만 종속된 경우

## 3정규화 (3NF: Third Normal Form)

3정규화는 2정규화를 만족하면서 **이행적 종속을 제거**하는 것이다. 기본 키가 아닌 속성이 다른 비 프라이머리 속성에 종속되는 경우 이를 제거하여 독립된 테이블로 만든다

- 목표 : 테이블 간의 불필요한 종속성을 제거하여 데이터 무결성을 높인다
- 조건 : 모든 비프라이머리 속성이 기본 키에 대해서만 종속되도록 함
- 예시 : 학생 테이블에서 학과명을 참조하고 학과 명과 학과 위치가 연결된 경우 학과 위치 정보를 학과 테이블로 분리

> 이행적 함수 종속
> 릴레이션에서 X, Y, Z 라는 3개의 속성이 있을 때
> X → Y, Y → Z 이란 종속 관계가 있을 경우 X → Z가 성립될 때 이행적 함수 종속이라고 한다
> X를 알면 Y를 알고 또 이를 통해 Z를 알 수 있는 경우

## BCNF (Boyce-Codd Normal Form)

BCNF는 3정규화보다 엄격한 조건으로 모든 결정자가 후보 키가 되도록 하는 것이다. 3정규화는 대부분 BCNF 조건을 만족하지만 특정 상황에서 추가로 BCNF를 적용해야 하는 경우도 있다

- 목표 : 모든 결정자가 후보 키가 되도록 하여 더욱 강한 데이터 무결성 보장
- 조건 : 모든 결정자가 후보 키가 되어야 한다
- 예시 : 여러 강의실을 사용하는 강의의 경우, 강의실 결정자가 비프라이머리 속성에 대해 이행적 종속성을 가지지 않도록 테이블을 재구성

> 결정자란?
> 함수 종속 관계에서 특정 종속자를 결정짓는 요소
> X → Y 일때, X는 결정자, Y는 종속자
> 학생 → 학번 일때, 학생은 결정자, 학번은 종속자

## 4정규화 (4NF: Fourth Normal Form)

4정규화는 **다치 종속성**을 제거하는 것이다. 하나의 기본 키가 여러 개의 독립적인 다치 종속성을 가진 경우 이를 분리하여 별도의 테이블로 만든다.

- 목표 : 다치 종속성을 분리하여 데이터 중복을 줄이고 테이블 구조를 단순화한다
- 조건 : 한 기본 키가 여러 속성에 독립적으로 종속되지 않도록 분리한다
- 예시 : 학생이 여러 강의를 듣고 동시에 여러 동아리에 가입한 경우, `학생-강의` , `학생-동아리` 테이블로 분리하여 다치 종속성을 독립적으로 관리한다.

> 다치 종속이란?
> 어떠한 조건을 만족하는 레코드(튜플)이 릴레이션 안에 있을 것을 요구하는 일종의 제약 조건
> 표현 : A →> B일 때 A가 B를 다치 결정한다고하고 B가 A에 다치 종속된다고 한다

## 5정규화 (5NF: Fifth Normal Form)

5정규화는 조인 종속성을 제거하는 것이다. 테이블이 여러 관계로 나눠질 수 있고 각각의 테이블이 서로 독립적일 때 데이터의 결합을 통해 다시 하나의 원래 테이블로 합쳐질 수 있어야한다

- 목표 : 조인 종속성을 제거하여 테이블을 가능한 분리하고 데이터를 조인으로 복원할 수 있도록한다
- 조건 : 테이블의 모든 조인 종속성이 후보 키를 통해서만 복원 가능하도록 한다
- 예시 : 프로젝트에 여러 직원이 참여하고 각 직원이 여러 역할을 담당하는 경우, `프로젝트-직원-역할` 관계를 세개의 테이블로 분리하여 저장
