# ALU(산술 논리 연산장치)

ALU(Arithmetic Logic Unit, 산술 논리 연산 장치)는 컴퓨터 프로세서(CPU)의 핵심 구성 요소 중 하나로 **산술 연산과 논리 연산을 수행**하는 하드웨어 회로이다. ALU는 컴퓨터의 중앙처리장치(CPU)나 그래픽 처리 장치(GPU)에서 데이터를 처리하는 중요한 역할을 한다.

# 주요 기능

### 1. 산술 연산(Arithmetic Operations)

- 덧셈
- 뺄셈
- 곱셈 (기본 ALU에 포함되지 않을 수 있다)
- 나눗셈 (기본 ALU에 포함되지 않을 수 있다)
- 증가 및 감소

### 2. 논리 연산(Logic Operations)

- AND, OR, XOR, NOT과 같은 비트 단위 논리 연산
- 비교 연산
- 시프트 연산(Shift Operations: 좌/우 이동)

### 3. 비트 연산(Bitwise Operations)

- 특정 비트의 설정, 지움, 토글

# ALU의 구성 요소

### 1. 연산 선택기(Operations Selector)

- 특정 명령(Opcode)을 기반으로 수행할 연산을 선택
- 제어 유닛(Control Unit)에서 연산 명령을 수신함

### 2. 입력 레지스터(Input Registers)

- 두 개의 입력 데이터(Operand)를 저장
- A와 B라는 값이 ALU 입력으로 들어옴

### 3. 출력 레지스터(Output Registers)

- 연산 결과를 저장하여 다른 컴포넌트로 전달

### 4. 플래그 레지스터(Flags Register)

- 연산의 상태나 결과를 나타내는 플래그 값을 저장
- 주요 플래그
  - Carry Flag(CF) : 연산 결과에서 캐리가 발생하였는지
  - Zero Flag(ZF) : 연산 결과가 0인지
  - Overflow Flag(OF) : 산술 오버플로우가 발생하였는지
  - Sign Flag(SF) : 결과의 부호(양수/음수)

### 5. 산술 연산기(Arithmetic Circuit)

- 덧셈 및 뺄셈 등의 산술 작업 수행
- **가산기(Adder)와 감산기(Subtractor)**

### 6. 논리 연산기(Logical Circuit)

- AND, OR, NOT, XOR 등과 같은 논리 작업을 처리한다

# ALU의 동작 과정

### 1. 연산 명령 입력

- CPU의 제어 유닛에서 ALU로 연산 명령이 전달됨

### 2. 데이터 입력

- 두 개의 입력 데이터를 레지스터에 저장(입력 레지스터에 저장)

### 3. 연산 수행

- ALU는 명령에 따라 산술 또는 논리 연산 수행

### 4. 결과 저장

- 연산 결과를 출력 레지스터에 저장하거나 메모리에 기록

### 5. 플래그 업데이트

- 결과를 기반으로 플래그 값을 업데이트

# ALU의 실제 사용 사례

1. **산술 작업**
   - 두 수의 합을 계산하여 메모리에 저장하거나 조건에 따라 분기
   - 예: `if (a + b > c)` 같은 조건문
2. **논리 작업**
   - 특정 조건을 체크하고, 제어 흐름을 결정
   - 예: `if (a & b == 0)`와 같은 비트 연산
3. **주소 계산**
   - 메모리 주소를 계산하여 데이터를 로드하거나 저장

# ALU와 CPU의 관계

- ALU는 CPU 내부의 한 부분으로, 데이터 연산의 실질적인 처리를 담당
- CPU는 ALU 외에도 제어 유닛(Control Unit)과 레지스터로 구성된다
- 제어 유닛은 ALU에 연산 명령을 보내고, 레지스터는 데이터를 임시 저장하며, ALU는 연산을 수행함

# ALU의 발전

### 1. 단일 사이클 ALU

- 한 번에 한 연산만 처리, 간단하지만 성능이 낮음
- 모든 연산이 `1 클럭`에서 완료

### 2. 멀티사이클 ALU

- 여러 클럭 주기를 통해 연산을 처리
- 연산을 여러 단계로 나누어 각각의 단계가 별도의 클럭 사이클에서 수행됨
- 덧셈 연산은 `2 클럭`, 곱셈은 `4 클럭` 등

### 3. 벡터 ALU(Vector ALU)

- 다수의 데이터를 동시에 처리하여 고성능 연산을 지원
- SIMD(Single Instruction, Multiple Data) 방식을 지원하여 여러 데이터를 병렬로 처리
- 하나의 클럭에서 여러 데이터(벡터)를 동시에 연산

---

# 가산기와 감산기

### **가산기(Adder)**

가산기는 컴퓨터와 디지털 회로에서 **두 개의 이진수(binary numbers)**를 더하는 장치이다. 이는 산술 연산을 처리하는 기본 요소로, CPU의 **ALU(Arithmetic Logic Unit)** 내부에 포함되어 있다

### **가산기의 종류**

1. **반가산기(Half Adder)**
   - 두 개의 입력 비트(예: A, B)를 더하여 두 개의 출력 비트 생성
     - **합(Sum)**: 더한 결과의 하위 비트
     - **자리올림(Carry)**: 더한 결과의 상위 비트
   - **진리표**
     | A | B | Sum | Carry |
     | --- | --- | --- | ----- |
     | 0 | 0 | 0 | 0 |
     | 0 | 1 | 1 | 0 |
     | 1 | 0 | 1 | 0 |
     | 1 | 1 | 0 | 1 |
   - **논리식**
     - Sum = A ⊕ B (XOR)
     - Carry = A ⋅ B (AND)
2. **전가산기(Full Adder)**
   - 세 개의 입력 비트(A, B, Carry-in)를 더하여 두 개의 출력 비트 생성
     - **합(Sum)**: 결과의 하위 비트
     - **자리올림(Carry-out)**: 결과의 상위 비트
   - **진리표**
     | A | B | Carry-in | Sum | Carry-out |
     | --- | --- | -------- | --- | --------- |
     | 0 | 0 | 0 | 0 | 0 |
     | 0 | 1 | 0 | 1 | 0 |
     | 1 | 0 | 0 | 1 | 0 |
     | 1 | 1 | 0 | 0 | 1 |
     | 0 | 0 | 1 | 1 | 0 |
     | 0 | 1 | 1 | 0 | 1 |
     | 1 | 0 | 1 | 0 | 1 |
     | 1 | 1 | 1 | 1 | 1 |
   - **논리식**:
     - Sum = A ⊕ B ⊕ Carry-in
     - Carry-out = (A ⋅ B) + (Carry-in ⋅ (A ⊕ B))
3. **병렬 가산기(Parallel Adder)**
   - 여러 비트를 동시에 더하기 위해 여러 전가산기를 연결한 구조
   - **리플 캐리 가산기(Ripple Carry Adder)**: 자리올림을 다음 비트로 전달
4. **캐리 룩어헤드 가산기(Carry Look-Ahead Adder)**
   - 자리올림 연산을 병렬로 계산하여 속도 향상

### **감산기(Subtractor)**

감산기는 두 개의 이진수를 빼는 장치. 가산기와 비슷한 구조를 가지며, **보수(Complement)**를 사용해 구현한다

### **감산기의 종류**

1. **반감산기(Half Subtractor)**
   - 두 개의 입력 비트(A, B)를 빼서 두 개의 출력 비트 생성
     - **차(Difference)**: 뺄셈 결과의 하위 비트
     - **자리 빌림(Borrow)**: 뺄셈 결과의 상위 비트
   - **진리표**
     | A | B | Difference | Borrow |
     | --- | --- | ---------- | ------ |
     | 0 | 0 | 0 | 0 |
     | 0 | 1 | 1 | 1 |
     | 1 | 0 | 1 | 0 |
     | 1 | 1 | 0 | 0 |
   - **논리식**
     - Difference = A ⊕ B
     - Borrow = B ⋅ ¬A
2. **전감산기(Full Subtractor)**
   - 세 개의 입력 비트(A, B, Borrow-in)를 빼서 두 개의 출력 비트 생성
     - **차(Difference)**: 뺄셈 결과의 하위 비트
     - **자리 빌림(Borrow-out)**: 뺄셈 결과의 상위 비트
   - **진리표**
     | A | B | Borrow-in | Difference | Borrow-out |
     | --- | --- | --------- | ---------- | ---------- |
     | 0 | 0 | 0 | 0 | 0 |
     | 0 | 1 | 0 | 1 | 1 |
     | 1 | 0 | 0 | 1 | 0 |
     | 1 | 1 | 0 | 0 | 0 |
     | 0 | 0 | 1 | 1 | 1 |
     | 0 | 1 | 1 | 0 | 1 |
     | 1 | 0 | 1 | 0 | 1 |
     | 1 | 1 | 1 | 1 | 0 |
   - **논리식**
     - Difference = A ⊕ B ⊕ Borrow-in
     - Borrow-out = (¬A ⋅ B) + (Borrow-in ⋅ (¬A ⊕ B))
3. **가산기를 이용한 감산기**
   - **2의 보수법**을 사용하여 감산기를 가산기로 대체 가능
     - A−B는 A+(−B)와 같음
     - −B는 B의 **2의 보수**

---

### **가산기와 감산기의 비교**

| 특징              | 가산기             | 감산기                                 |
| ----------------- | ------------------ | -------------------------------------- |
| **기능**          | 두 숫자를 더함     | 두 숫자를 뺌                           |
| **구현 방식**     | XOR, AND 게이트    | XOR, AND, NOT 게이트 사용              |
| **구조**          | 반가산기, 전가산기 | 반감산기, 전감산기                     |
| **2의 보수 사용** | 필요하지 않음      | 2의 보수를 이용하여 가산기로 구현 가능 |

---

# 캐리

### 캐리(Carry)란?

**캐리(Carry)**는 이진수 덧셈에서 **자리올림(위로 넘겨지는 값)**을 의미합니다.

캐리는 두 비트를 더했을 때 **결과가 자리 수를 초과**하는 경우 발생하고, 더 큰 자리로 넘겨져 연산에 반영된다

### **캐리(Carry)의 역할**

### 1. **자리올림 계산**

두 개의 비트를 더했을 때 값이 2(10진법 기준) 이상이면 자리올림이 발생하며, **다음 자리로 넘어가는 값**을 캐리라고 함

**예제**

```
  1  (첫 번째 비트)
+ 1  (두 번째 비트)
-----
 10  (합: 0, 캐리: 1)
```

### 2. **다중 비트 연산**

다중 비트 이진수를 더할 때, 이전 자리에서 발생한 캐리가 현재 자리의 덧셈에 영향을 미침

**예제**

```
   1011  (11, 첫 번째 숫자)
+  1101  (13, 두 번째 숫자)
--------
  11000  (24, 결과: 캐리 발생)

```

### **캐리의 종류**

1. **Carry-Out (자리올림)**
   - 특정 자리에서 발생한 자리올림 값이 **다음 자리로 넘어가는 경우**.
   - 전가산기(Full Adder)에서 **Carry-Out**을 계산.
2. **Carry-In (자리올림 입력)**
   - 이전 자리에서 발생한 자리올림 값이 **현재 자리의 연산에 반영되는 경우**.
   - 전가산기(Full Adder)는 입력으로 **Carry-In**을 사용.
